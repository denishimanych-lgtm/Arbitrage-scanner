# Arbitrage Scanner Settings
# Values can be overridden by environment variables or Redis

default: &default
  # === Alert Thresholds ===
  min_spread_pct: 2.0
  high_spread_threshold: 10.0
  medium_spread_threshold: 5.0
  # No max_spread_pct limit - show all spreads regardless of size

  # === Liquidity Requirements ===
  min_liquidity_usd: 500000
  min_dex_liquidity_usd: 1000    # Min DEX pool liquidity (filters dust pools)
  min_exit_liquidity_usd: 5000
  min_volume_24h_dex: 200000
  min_volume_24h_futures: 200000

  # === Position Sizing ===
  min_position_size_usd: 1000
  max_position_size_usd: 50000
  suggested_position_usd: 10000

  # === Safety Limits ===
  max_slippage_pct: 2.0
  max_latency_ms: 5000
  max_spread_age_sec: 60
  max_signal_age_sec: 300  # Allow signals up to 5 min old (queue backlog)
  max_spread_age_hours: 24
  min_depth_vs_history_ratio: 0.3
  warning_depth_ratio: 0.5
  max_position_to_exit_ratio: 0.5
  max_bid_ask_spread_pct: 1.0
  min_history_samples: 10

  # === Price Staleness ===
  # Must account for full fetch cycle time (15-30 seconds across all exchanges)
  max_price_age_ms: 60000  # 60 seconds - filter truly stale data only

  # === Lagging Exchange Detection ===
  lagging_min_exchanges: 4           # Min exchanges for comparison
  lagging_min_deviation_pct: 5.0     # Min deviation % to consider lagging
  lagging_max_other_deviation_pct: 2.0  # Max deviation % for other exchanges

  # === Alert Cooldowns ===
  alert_cooldown_seconds: 300
  lagging_alert_cooldown_seconds: 600

  # === Signal Types ===
  enable_auto_signals: true
  enable_manual_signals: true
  enable_lagging_signals: false

  # === Enabled Exchanges ===
  enabled_cex:
    - binance
    - bybit
    - okx
    - gate
    - mexc
    - kucoin
    - htx
    - bitget

  enabled_dex:
    - jupiter
    - raydium
    - orca

  enabled_perp_dex:
    - hyperliquid
    - dydx
    - gmx
    - vertex

  # === Enabled Networks ===
  enabled_networks:
    - solana
    - ethereum
    - bsc
    - arbitrum

  # === Z-Score Statistical Arbitrage ===
  zscore_entry_threshold: 2.0       # |z| > 2.0 to enter position
  zscore_stop_threshold: 3.5        # |z| > 3.5 to stop out
  zscore_exit_threshold: 0.5        # |z| < 0.5 to exit (mean reversion)
  zscore_lookback_days: 90          # Rolling window for mean/std
  zscore_min_data_points: 30        # Min samples before calculating
  enable_zscore_alerts: true

  # === Funding Rate Alerts ===
  funding_min_rate: 0.0003          # Min rate for alert (0.03%/8h)
  funding_min_spread: 0.0002        # Min spread for cross-venue alert
  funding_min_apr: 30               # Min annualized % for alert
  enable_funding_alerts: true

  # === Stablecoin Depeg Alerts ===
  stablecoin_alert_threshold: 0.99  # Alert when price < $0.99
  curve_stress_threshold: 70        # Curve 3pool stress threshold %
  enable_stablecoin_alerts: true

  # === Orderbook Analysis ===
  orderbook_depth: 20  # Number of orderbook levels to fetch

  # === DEX Price Fetcher ===
  dex_quote_amounts_usd: [100, 500, 1000, 2500, 5000, 10000]

  # === System ===
  price_update_interval_sec: 1
  ticker_discovery_interval_hours: 24
  log_level: info

development:
  <<: *default
  min_spread_pct: 1.0
  min_liquidity_usd: 100000
  log_level: debug

production:
  <<: *default
  min_spread_pct: 2.0
  min_liquidity_usd: 500000
  log_level: info

test:
  <<: *default
  min_spread_pct: 0.5
  min_liquidity_usd: 1000
  alert_cooldown_seconds: 1
